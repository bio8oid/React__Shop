{"ast":null,"code":"import { LOAD_PRODUCTS, ADD_TO_CART, REMOVE_ITEM, SUB_QUANTITY, ADD_QUANTITY, ADD_SHIPPING, SUB_SHIPPING, ITEM_DESCRIPTION, SORT_PRICE_ASC, SORT_PRICE_DESC, SORT_NAME_ASC, SORT_NAME_DESC, FILTER_TYPE_RISERS, RISERS_REMOVED, FILTER_TYPE_LIMBS, LIMBS_REMOVED, FILTER_TYPE_TABS, TABS_REMOVED, FILTER_TYPE_STABILIZERS, STABILIZERS_REMOVED, FILTER_TYPE_ARROWS, ARROWS_REMOVED, FILTER_TYPE_SIGHTS, SIGHTS_REMOVED, FILTER_TYPE_STANDS, STANDS_REMOVED, FILTER_TYPE_ARMGUARDS, ARMGUARDS_REMOVED, RESET_FILTERS, DISCOUNT_HANDLE, SET_PAGE } from '../actions/actions';\nconst initState = {\n  itemsTemplate: [],\n  items: [],\n  addedItems: [],\n  indicatorItems: 0,\n  total: 0.00,\n  describedProduct: [],\n  page: 1\n};\n\nconst itemsReducers = (state = initState, action) => {\n  if (action.type === LOAD_PRODUCTS) {\n    const refactored = action.data.map(x => x.price ? { ...x,\n      price: Number(x.price)\n    } : x);\n    let serverResponse = refactored;\n    return { ...state,\n      items: [...initState.items, ...serverResponse],\n      itemsTemplate: [...initState.itemsTemplate, ...serverResponse]\n    };\n  }\n\n  ;\n\n  if (action.type === ADD_TO_CART) {\n    let addedItem = state.items.find(item => item.id === action.id);\n    let existedItem = state.addedItems.find(item => action.id === item.id);\n\n    if (existedItem) {\n      addedItem.quantity += 1;\n      return { ...state,\n        total: state.total + addedItem.price,\n        indicatorItems: state.indicatorItems + 1\n      };\n    } else {\n      addedItem.quantity = 1;\n      let newTotal = state.total + addedItem.price;\n      return { ...state,\n        addedItems: [...state.addedItems, addedItem],\n        total: newTotal,\n        indicatorItems: state.indicatorItems + 1\n      };\n    }\n  }\n\n  ;\n\n  if (action.type === REMOVE_ITEM) {\n    let itemToRemove = state.addedItems.find(item => action.id === item.id);\n    let newItems = state.addedItems.filter(item => action.id !== item.id);\n    let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n\n    if (newItems.length === 0) {\n      document.getElementById('shipping-checkbox').checked = false;\n      document.getElementById(\"discount-message\").classList.add(\"hide\");\n      return { ...state,\n        addedItems: newItems,\n        total: 0,\n        indicatorItems: state.indicatorItems - itemToRemove.quantity\n      };\n    }\n\n    ;\n    return { ...state,\n      addedItems: newItems,\n      total: newTotal,\n      indicatorItems: state.indicatorItems - itemToRemove.quantity\n    };\n  }\n\n  ;\n\n  if (action.type === ADD_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id);\n    addedItem.quantity += 1;\n    let newTotal = state.total + addedItem.price;\n    return { ...state,\n      total: newTotal,\n      indicatorItems: state.indicatorItems + 1\n    };\n  }\n\n  ;\n\n  if (action.type === SUB_QUANTITY) {\n    let addedItem = state.items.find(item => item.id === action.id);\n\n    if (addedItem.quantity === 1) {\n      let newItems = state.addedItems.filter(item => item.id !== action.id);\n      let newTotal = state.total - addedItem.price;\n\n      if (newItems.length === 0) {\n        document.getElementById('shipping-checkbox').checked = false;\n        document.getElementById(\"discount-message\").classList.add(\"hide\");\n        return { ...state,\n          addedItems: newItems,\n          total: 0,\n          indicatorItems: state.indicatorItems - 1\n        };\n      }\n\n      ;\n      return { ...state,\n        addedItems: newItems,\n        total: newTotal,\n        indicatorItems: state.indicatorItems - 1\n      };\n    } else {\n      addedItem.quantity -= 1;\n      let newTotal = state.total - addedItem.price;\n      return { ...state,\n        total: newTotal,\n        indicatorItems: state.indicatorItems - 1\n      };\n    }\n  }\n\n  ;\n\n  if (action.type === ADD_SHIPPING) {\n    return { ...state,\n      total: state.total + 15.00\n    };\n  }\n\n  ;\n\n  if (action.type === SUB_SHIPPING) {\n    if (state.addedItems === []) {\n      return { ...state,\n        total: 0.00\n      };\n    }\n\n    ;\n    return { ...state,\n      total: state.total - 15.00\n    };\n  }\n\n  ;\n\n  if (action.type === ITEM_DESCRIPTION) {\n    let describedProduct = state.items.find(item => item.id === action.id);\n    return { ...state,\n      describedProduct: [describedProduct]\n    };\n  }\n\n  ;\n\n  if (action.type === SORT_PRICE_ASC) {\n    var sortedByPriceAsc = state.items.sort((a, b) => a.price - b.price);\n    return { ...state,\n      items: [...sortedByPriceAsc]\n    };\n  }\n\n  ;\n\n  if (action.type === SORT_PRICE_DESC) {\n    let sortedByPriceDesc = state.items.sort((a, b) => b.price - a.price);\n    return { ...state,\n      items: [...sortedByPriceDesc]\n    };\n  }\n\n  ;\n\n  if (action.type === SORT_NAME_ASC) {\n    let sortedByNameAsc = state.items.sort((a, b) => a.title.localeCompare(b.title));\n    return { ...state,\n      items: [...sortedByNameAsc]\n    };\n  }\n\n  ;\n\n  if (action.type === SORT_NAME_DESC) {\n    let sortedByNameDesc = state.items.sort((a, b) => b.title.localeCompare(a.title));\n    return { ...state,\n      items: [...sortedByNameDesc]\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_RISERS) {\n    let filteredRisers = state.itemsTemplate.filter(x => x.tag === 'risers');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredRisers]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredRisers\n    };\n  }\n\n  ;\n\n  if (action.type === RISERS_REMOVED) {\n    let risersRemoved = state.items.filter(x => x.tag !== 'risers');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'risers').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: risersRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_LIMBS) {\n    let filteredLimbs = state.itemsTemplate.filter(x => x.tag === 'limbs');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredLimbs]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredLimbs\n    };\n  }\n\n  ;\n\n  if (action.type === LIMBS_REMOVED) {\n    let limbsRemoved = state.items.filter(x => x.tag !== 'limbs');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'limbs').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: limbsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_TABS) {\n    let filteredTabs = state.itemsTemplate.filter(x => x.tag === 'tabs');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredTabs]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredTabs\n    };\n  }\n\n  ;\n\n  if (action.type === TABS_REMOVED) {\n    let tabsRemoved = state.items.filter(x => x.tag !== 'tabs');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'tabs').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: tabsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_STABILIZERS) {\n    let filteredStabilizers = state.itemsTemplate.filter(x => x.tag === 'stabilizers');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredStabilizers]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredStabilizers\n    };\n  }\n\n  ;\n\n  if (action.type === STABILIZERS_REMOVED) {\n    let stabilizersRemoved = state.items.filter(x => x.tag !== 'stabilizers');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'stabilizers').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: stabilizersRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_ARROWS) {\n    let filteredArrows = state.itemsTemplate.filter(x => x.tag === 'arrows');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredArrows]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredArrows\n    };\n  }\n\n  ;\n\n  if (action.type === ARROWS_REMOVED) {\n    let arrowsRemoved = state.items.filter(x => x.tag !== 'arrows');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'arrows').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: arrowsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_SIGHTS) {\n    let filteredSights = state.itemsTemplate.filter(x => x.tag === 'sights');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredSights]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredSights\n    };\n  }\n\n  ;\n\n  if (action.type === SIGHTS_REMOVED) {\n    let sightsRemoved = state.items.filter(x => x.tag !== 'sights');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'sights').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: sightsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_STANDS) {\n    let filteredStands = state.itemsTemplate.filter(x => x.tag === 'stands');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredStands]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredStands\n    };\n  }\n\n  ;\n\n  if (action.type === STANDS_REMOVED) {\n    let standsRemoved = state.items.filter(x => x.tag !== 'stands');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'stands').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: standsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === FILTER_TYPE_ARMGUARDS) {\n    let filteredArmguards = state.itemsTemplate.filter(x => x.tag === 'armguards');\n    let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\n\n    if (alreadyFiltered) {\n      return { ...state,\n        page: 1,\n        items: [...state.items, ...filteredArmguards]\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: filteredArmguards\n    };\n  }\n\n  ;\n\n  if (action.type === ARMGUARDS_REMOVED) {\n    let armguardsRemoved = state.items.filter(x => x.tag !== 'armguards');\n    let Empty = state.items.length === state.items.filter(x => x.tag === 'armguards').length;\n\n    if (Empty) {\n      return { ...state,\n        page: 1,\n        items: state.itemsTemplate\n      };\n    }\n\n    ;\n    return { ...state,\n      page: 1,\n      items: armguardsRemoved\n    };\n  }\n\n  ;\n\n  if (action.type === RESET_FILTERS) {\n    let sortedById = state.itemsTemplate.sort((a, b) => a.id - b.id);\n    return { ...state,\n      items: sortedById\n    };\n  }\n\n  ;\n\n  if (action.type === DISCOUNT_HANDLE) {\n    let discountedValue = state.total - (state.total * 10 / 100).toFixed(0);\n    return { ...state,\n      total: discountedValue\n    };\n  }\n\n  ;\n\n  if (action.type === SET_PAGE) {\n    if (action.id === \"right\") {\n      return { ...state,\n        page: state.page + 1\n      };\n    }\n\n    ;\n\n    if (action.id === \"left\") {\n      return { ...state,\n        page: state.page - 1\n      };\n    }\n\n    ;\n\n    if (action.id === \"\") {\n      return { ...state,\n        page: state.page\n      };\n    }\n\n    ;\n    return { ...state,\n      page: Number(action.id)\n    };\n  } else {\n    return state;\n  }\n};\n\nexport default itemsReducers;","map":{"version":3,"sources":["D:/prog/files/shop/client/src/reducers/itemsReducers.js"],"names":["LOAD_PRODUCTS","ADD_TO_CART","REMOVE_ITEM","SUB_QUANTITY","ADD_QUANTITY","ADD_SHIPPING","SUB_SHIPPING","ITEM_DESCRIPTION","SORT_PRICE_ASC","SORT_PRICE_DESC","SORT_NAME_ASC","SORT_NAME_DESC","FILTER_TYPE_RISERS","RISERS_REMOVED","FILTER_TYPE_LIMBS","LIMBS_REMOVED","FILTER_TYPE_TABS","TABS_REMOVED","FILTER_TYPE_STABILIZERS","STABILIZERS_REMOVED","FILTER_TYPE_ARROWS","ARROWS_REMOVED","FILTER_TYPE_SIGHTS","SIGHTS_REMOVED","FILTER_TYPE_STANDS","STANDS_REMOVED","FILTER_TYPE_ARMGUARDS","ARMGUARDS_REMOVED","RESET_FILTERS","DISCOUNT_HANDLE","SET_PAGE","initState","itemsTemplate","items","addedItems","indicatorItems","total","describedProduct","page","itemsReducers","state","action","type","refactored","data","map","x","price","Number","serverResponse","addedItem","find","item","id","existedItem","quantity","newTotal","itemToRemove","newItems","filter","length","document","getElementById","checked","classList","add","sortedByPriceAsc","sort","a","b","sortedByPriceDesc","sortedByNameAsc","title","localeCompare","sortedByNameDesc","filteredRisers","tag","alreadyFiltered","risersRemoved","Empty","filteredLimbs","limbsRemoved","filteredTabs","tabsRemoved","filteredStabilizers","stabilizersRemoved","filteredArrows","arrowsRemoved","filteredSights","sightsRemoved","filteredStands","standsRemoved","filteredArmguards","armguardsRemoved","sortedById","discountedValue","toFixed"],"mappings":"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","sourcesContent":["import {\r\n    LOAD_PRODUCTS,\r\n    ADD_TO_CART,\r\n    REMOVE_ITEM,\r\n    SUB_QUANTITY,\r\n    ADD_QUANTITY,\r\n    ADD_SHIPPING,\r\n    SUB_SHIPPING,\r\n    ITEM_DESCRIPTION,\r\n    SORT_PRICE_ASC,\r\n    SORT_PRICE_DESC,\r\n    SORT_NAME_ASC,\r\n    SORT_NAME_DESC,\r\n    FILTER_TYPE_RISERS,\r\n    RISERS_REMOVED,\r\n    FILTER_TYPE_LIMBS,\r\n    LIMBS_REMOVED,\r\n    FILTER_TYPE_TABS,\r\n    TABS_REMOVED,\r\n    FILTER_TYPE_STABILIZERS,\r\n    STABILIZERS_REMOVED,\r\n    FILTER_TYPE_ARROWS,\r\n    ARROWS_REMOVED,\r\n    FILTER_TYPE_SIGHTS,\r\n    SIGHTS_REMOVED,\r\n    FILTER_TYPE_STANDS,\r\n    STANDS_REMOVED,\r\n    FILTER_TYPE_ARMGUARDS,\r\n    ARMGUARDS_REMOVED,\r\n    RESET_FILTERS,\r\n    DISCOUNT_HANDLE,\r\n    SET_PAGE\r\n\r\n} from '../actions/actions';\r\n\r\n\r\nconst initState = {\r\n    itemsTemplate: [],\r\n    items: [],\r\n    addedItems: [],\r\n    indicatorItems: 0,\r\n    total: 0.00,\r\n    describedProduct: [],\r\n    page: 1\r\n}\r\n\r\nconst itemsReducers = (state = initState, action) => {\r\n\r\n    if (action.type === LOAD_PRODUCTS) {\r\n        const refactored = action.data.map(x => x.price ? { ...x, price: Number(x.price) } : x);\r\n        let serverResponse = refactored;\r\n\r\n        return {\r\n            ...state,\r\n            items: [...initState.items, ...serverResponse],\r\n            itemsTemplate: [...initState.itemsTemplate, ...serverResponse],\r\n        }\r\n    };\r\n\r\n    if (action.type === ADD_TO_CART) {\r\n        let addedItem = state.items.find(item => item.id === action.id);\r\n        let existedItem = state.addedItems.find(item => action.id === item.id);\r\n\r\n        if (existedItem) {\r\n            addedItem.quantity += 1\r\n            return {\r\n                ...state,\r\n                total: state.total + addedItem.price,\r\n                indicatorItems: state.indicatorItems + 1\r\n            }\r\n        }\r\n        else {\r\n            addedItem.quantity = 1;\r\n            let newTotal = state.total + addedItem.price\r\n\r\n            return {\r\n                ...state,\r\n                addedItems: [...state.addedItems, addedItem],\r\n                total: newTotal,\r\n                indicatorItems: state.indicatorItems + 1\r\n            }\r\n        }\r\n    };\r\n\r\n    if (action.type === REMOVE_ITEM) {\r\n        let itemToRemove = state.addedItems.find(item => action.id === item.id);\r\n        let newItems = state.addedItems.filter(item => action.id !== item.id);\r\n        let newTotal = state.total - (itemToRemove.price * itemToRemove.quantity);\r\n\r\n        if (newItems.length === 0) {\r\n            document.getElementById('shipping-checkbox').checked = false;\r\n            document.getElementById(\"discount-message\").classList.add(\"hide\");\r\n\r\n            return {\r\n                ...state,\r\n                addedItems: newItems,\r\n                total: 0,\r\n                indicatorItems: state.indicatorItems - itemToRemove.quantity\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            addedItems: newItems,\r\n            total: newTotal,\r\n            indicatorItems: state.indicatorItems - itemToRemove.quantity\r\n        }\r\n    };\r\n\r\n    if (action.type === ADD_QUANTITY) {\r\n        let addedItem = state.items.find(item => item.id === action.id);\r\n        addedItem.quantity += 1;\r\n        let newTotal = state.total + addedItem.price;\r\n        return {\r\n            ...state,\r\n            total: newTotal,\r\n            indicatorItems: state.indicatorItems + 1\r\n        }\r\n    };\r\n\r\n    if (action.type === SUB_QUANTITY) {\r\n        let addedItem = state.items.find(item => item.id === action.id);\r\n\r\n        if (addedItem.quantity === 1) {\r\n            let newItems = state.addedItems.filter(item => item.id !== action.id);\r\n            let newTotal = state.total - addedItem.price;\r\n\r\n            if (newItems.length === 0) {\r\n                document.getElementById('shipping-checkbox').checked = false;\r\n                document.getElementById(\"discount-message\").classList.add(\"hide\");\r\n\r\n                return {\r\n                    ...state,\r\n                    addedItems: newItems,\r\n                    total: 0,\r\n                    indicatorItems: state.indicatorItems - 1\r\n                }\r\n            };\r\n            return {\r\n                ...state,\r\n                addedItems: newItems,\r\n                total: newTotal,\r\n                indicatorItems: state.indicatorItems - 1\r\n            }\r\n        }\r\n\r\n        else {\r\n            addedItem.quantity -= 1\r\n            let newTotal = state.total - addedItem.price;\r\n            return {\r\n                ...state,\r\n                total: newTotal,\r\n                indicatorItems: state.indicatorItems - 1\r\n            }\r\n        }\r\n    };\r\n\r\n    if (action.type === ADD_SHIPPING) {\r\n        return {\r\n            ...state,\r\n            total: state.total + 15.00\r\n        }\r\n    };\r\n\r\n    if (action.type === SUB_SHIPPING) {\r\n        if (state.addedItems === []) {\r\n            return {\r\n                ...state,\r\n                total: 0.00\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            total: state.total - 15.00\r\n        }\r\n    };\r\n\r\n    if (action.type === ITEM_DESCRIPTION) {\r\n        let describedProduct = state.items.find(item => item.id === action.id);\r\n        return {\r\n            ...state,\r\n            describedProduct: [describedProduct]\r\n        }\r\n    };\r\n\r\n    if (action.type === SORT_PRICE_ASC) {\r\n        var sortedByPriceAsc = state.items.sort((a, b) => (a.price - b.price));\r\n        return {\r\n            ...state,\r\n            items: [...sortedByPriceAsc]\r\n        }\r\n    };\r\n\r\n    if (action.type === SORT_PRICE_DESC) {\r\n        let sortedByPriceDesc = state.items.sort((a, b) => (b.price - a.price));\r\n        return {\r\n            ...state,\r\n            items: [...sortedByPriceDesc]\r\n        }\r\n    };\r\n\r\n    if (action.type === SORT_NAME_ASC) {\r\n        let sortedByNameAsc = state.items.sort((a, b) => a.title.localeCompare(b.title));\r\n        return {\r\n            ...state,\r\n            items: [...sortedByNameAsc]\r\n        }\r\n    };\r\n\r\n    if (action.type === SORT_NAME_DESC) {\r\n        let sortedByNameDesc = state.items.sort((a, b) => b.title.localeCompare(a.title));\r\n        return {\r\n            ...state,\r\n            items: [...sortedByNameDesc]\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_RISERS) {\r\n        let filteredRisers = state.itemsTemplate.filter(x => x.tag === 'risers');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredRisers],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredRisers\r\n        }\r\n    };\r\n\r\n    if (action.type === RISERS_REMOVED) {\r\n        let risersRemoved = state.items.filter(x => x.tag !== 'risers');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'risers').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: risersRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_LIMBS) {\r\n        let filteredLimbs = state.itemsTemplate.filter(x => x.tag === 'limbs');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredLimbs],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredLimbs\r\n        }\r\n    };\r\n\r\n    if (action.type === LIMBS_REMOVED) {\r\n        let limbsRemoved = state.items.filter(x => x.tag !== 'limbs');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'limbs').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: limbsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_TABS) {\r\n        let filteredTabs = state.itemsTemplate.filter(x => x.tag === 'tabs');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredTabs],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredTabs\r\n        }\r\n    };\r\n\r\n    if (action.type === TABS_REMOVED) {\r\n        let tabsRemoved = state.items.filter(x => x.tag !== 'tabs');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'tabs').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: tabsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_STABILIZERS) {\r\n        let filteredStabilizers = state.itemsTemplate.filter(x => x.tag === 'stabilizers');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredStabilizers],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredStabilizers\r\n        }\r\n    };\r\n\r\n    if (action.type === STABILIZERS_REMOVED) {\r\n        let stabilizersRemoved = state.items.filter(x => x.tag !== 'stabilizers');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'stabilizers').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: stabilizersRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_ARROWS) {\r\n        let filteredArrows = state.itemsTemplate.filter(x => x.tag === 'arrows');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredArrows],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredArrows\r\n        }\r\n    };\r\n\r\n    if (action.type === ARROWS_REMOVED) {\r\n        let arrowsRemoved = state.items.filter(x => x.tag !== 'arrows');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'arrows').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: arrowsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_SIGHTS) {\r\n        let filteredSights = state.itemsTemplate.filter(x => x.tag === 'sights');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredSights],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredSights\r\n        }\r\n    };\r\n\r\n    if (action.type === SIGHTS_REMOVED) {\r\n        let sightsRemoved = state.items.filter(x => x.tag !== 'sights');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'sights').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: sightsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_STANDS) {\r\n        let filteredStands = state.itemsTemplate.filter(x => x.tag === 'stands');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredStands],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredStands\r\n        }\r\n    };\r\n\r\n    if (action.type === STANDS_REMOVED) {\r\n        let standsRemoved = state.items.filter(x => x.tag !== 'stands');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'stands').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: standsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === FILTER_TYPE_ARMGUARDS) {\r\n        let filteredArmguards = state.itemsTemplate.filter(x => x.tag === 'armguards');\r\n        let alreadyFiltered = state.items.length !== state.itemsTemplate.length;\r\n\r\n        if (alreadyFiltered) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: [...state.items, ...filteredArmguards],\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: filteredArmguards\r\n        }\r\n    };\r\n\r\n    if (action.type === ARMGUARDS_REMOVED) {\r\n        let armguardsRemoved = state.items.filter(x => x.tag !== 'armguards');\r\n        let Empty = state.items.length === state.items.filter(x => x.tag === 'armguards').length;\r\n\r\n        if (Empty) {\r\n            return {\r\n                ...state,\r\n                page: 1,\r\n                items: state.itemsTemplate\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: 1,\r\n            items: armguardsRemoved\r\n        }\r\n    };\r\n\r\n    if (action.type === RESET_FILTERS) {\r\n        let sortedById = state.itemsTemplate.sort((a, b) => (a.id - b.id));\r\n        return {\r\n            ...state,\r\n            items: sortedById\r\n        }\r\n    };\r\n\r\n    if (action.type === DISCOUNT_HANDLE) {\r\n        let discountedValue = (state.total - (state.total * 10 / 100).toFixed(0));\r\n        return {\r\n            ...state,\r\n            total: discountedValue\r\n        }\r\n    };\r\n\r\n    if (action.type === SET_PAGE) {\r\n        if (action.id === \"right\") {\r\n            return {\r\n                ...state,\r\n                page: state.page + 1\r\n            }\r\n        };\r\n        if (action.id === \"left\") {\r\n            return {\r\n                ...state,\r\n                page: state.page - 1\r\n            }\r\n        };\r\n        if (action.id === \"\") {\r\n            return {\r\n                ...state,\r\n                page: state.page\r\n            }\r\n        };\r\n        return {\r\n            ...state,\r\n            page: Number(action.id)\r\n        }\r\n    }\r\n\r\n    else {\r\n        return state;\r\n    }\r\n};\r\n\r\nexport default itemsReducers;"]},"metadata":{},"sourceType":"module"}